<!DOCTYPE html>
<html >

<head>

  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>Research Tools for Social Scientists</title>
  <meta name="description" content="Research Tools for Social Scientists">
  <meta name="generator" content="bookdown <!--bookdown:version--> and GitBook 2.6.7">

  <meta property="og:title" content="Research Tools for Social Scientists" />
  <meta property="og:type" content="book" />
  
  
  
  <meta name="github-repo" content="Thdegraaff/Research_tools_for_social_scientists" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Research Tools for Social Scientists" />
  
  
  

<meta name="author" content="Thomas de Graaff">


<meta name="date" content="2017-10-17">

  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  
  
<!--bookdown:link_prev-->
<!--bookdown:link_next-->
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>


<style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
</style>

</head>

<body>



<!--bookdown:title:start-->
<div id="header">
<h1 class="title">Research Tools for Social Scientists</h1>
<h4 class="author"><em>Thomas de Graaff</em></h4>
<h4 class="date"><em>October 17, 2017</em></h4>
</div>
<!--bookdown:title:end-->

<!--bookdown:toc:start-->
  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">
<!--bookdown:toc2:start-->
<ul>
<li><a href="#introduction"><span class="toc-section-number">1</span> Introduction</a><ul>
<li><a href="#preface"><span class="toc-section-number">1.1</span> Preface</a></li>
<li><a href="#where-to-get-r"><span class="toc-section-number">1.2</span> Where to get <code>R</code></a></li>
<li><a href="#structure-of-the-book"><span class="toc-section-number">1.3</span> Structure of the book</a></li>
</ul></li>
<li><a href="#why-bother"><span class="toc-section-number">2</span> Why bother?</a><ul>
<li><a href="#why-do-we-need-all-this"><span class="toc-section-number">2.1</span> Why do we need all this?</a></li>
<li><a href="#why-use-r-and-not-other-applications"><span class="toc-section-number">2.2</span> Why use <code>R</code> and not other applications?</a></li>
<li><a href="#r-markdown-a-wonderful-life-in-plain-text"><span class="toc-section-number">2.3</span> R Markdown: a wonderful life in plain text</a></li>
<li><a href="#regression-analysis-not-again"><span class="toc-section-number">2.4</span> Regression analysis: not again!</a></li>
</ul></li>
<li><a href="#basic-r-usage"><span class="toc-section-number">3</span> Basic <code>R</code> Usage</a><ul>
<li><a href="#for-absolute-beginners"><span class="toc-section-number">3.1</span> For absolute beginners</a></li>
<li><a href="#how-to-use-it"><span class="toc-section-number">3.2</span> How to use it</a><ul>
<li><a href="#subsec:scripts"><span class="toc-section-number">3.2.1</span> Scripts</a></li>
<li><a href="#help"><span class="toc-section-number">3.2.2</span> Help!</a></li>
<li><a href="#subsec:packages"><span class="toc-section-number">3.2.3</span> Packages</a></li>
<li><a href="#using-comments"><span class="toc-section-number">3.2.4</span> Using comments</a></li>
</ul></li>
<li><a href="#reading-and-writing-data"><span class="toc-section-number">3.3</span> Reading and writing data</a></li>
<li><a href="#ehmmm-dataframes"><span class="toc-section-number">3.4</span> Ehmmm, dataframes</a></li>
<li><a href="#functions"><span class="toc-section-number">3.5</span> Functions</a></li>
<li><a href="#regression-modeling"><span class="toc-section-number">3.6</span> Regression modeling</a></li>
<li><a href="#making-plots"><span class="toc-section-number">3.7</span> Making plots</a></li>
<li><a href="#recap"><span class="toc-section-number">3.8</span> Recap</a></li>
</ul></li>
<li><a href="#digression-linear-regression-and-how-to-apply-it"><span class="toc-section-number">4</span> Digression: Linear Regression and how to apply it</a><ul>
<li><a href="#sec:theory"><span class="toc-section-number">4.1</span> Theoretical background</a><ul>
<li><a href="#the-model"><span class="toc-section-number">4.1.1</span> The model</a></li>
<li><a href="#the-least-squares-assumptions"><span class="toc-section-number">4.1.2</span> The least squares assumptions</a></li>
<li><a href="#possible-violations-and-how-to-spot-them"><span class="toc-section-number">4.1.3</span> Possible violations and how to spot them</a></li>
<li><a href="#normality-heteroskedasticity-and-multicollinearity"><span class="toc-section-number">4.1.4</span> Normality, heteroskedasticity and multicollinearity</a></li>
</ul></li>
<li><a href="#sec:applications"><span class="toc-section-number">4.2</span> Applications of linear regression</a><ul>
<li><a href="#descriptives"><span class="toc-section-number">4.2.1</span> Descriptives</a></li>
<li><a href="#baseline-model"><span class="toc-section-number">4.2.2</span> Baseline model</a></li>
<li><a href="#specificion-issues"><span class="toc-section-number">4.2.3</span> Specificion issues</a></li>
<li><a href="#reporting"><span class="toc-section-number">4.2.4</span> Reporting</a></li>
<li><a href="#internal-validation"><span class="toc-section-number">4.2.5</span> Internal validation</a></li>
</ul></li>
</ul></li>
<li><a href="#network-analysis-with-r"><span class="toc-section-number">5</span> Network analysis with <code>R</code></a><ul>
<li><a href="#introduction-1"><span class="toc-section-number">5.1</span> Introduction</a></li>
<li><a href="#creating-networks"><span class="toc-section-number">5.2</span> Creating networks</a><ul>
<li><a href="#creating-network-yourself"><span class="toc-section-number">5.2.1</span> Creating network yourself</a></li>
<li><a href="#structured-networks"><span class="toc-section-number">5.2.2</span> Structured networks</a></li>
<li><a href="#reading-in-networks"><span class="toc-section-number">5.2.3</span> Reading in networks</a></li>
<li><a href="#sankey-networks"><span class="toc-section-number">5.2.4</span> Sankey networks</a></li>
</ul></li>
<li><a href="#network-characteristics"><span class="toc-section-number">5.3</span> Network characteristics</a></li>
</ul></li>
<li><a href="#in-conclusion"><span class="toc-section-number">6</span> In conclusion</a></li>
</ul>
<!--bookdown:toc2:end-->
      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Research Tools for Social Scientists</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<!--bookdown:toc:end-->
<!--bookdown:body:start-->
<div id="introduction" class="section level1">
<h1><span class="header-section-number">1</span> Introduction</h1>
<div id="preface" class="section level2">
<h2><span class="header-section-number">1.1</span> Preface</h2>
</div>
<div id="where-to-get-r" class="section level2">
<h2><span class="header-section-number">1.2</span> Where to get <code>R</code></h2>
</div>
<div id="structure-of-the-book" class="section level2">
<h2><span class="header-section-number">1.3</span> Structure of the book</h2>
<!--chapter:end:index.rmd-->
</div>
</div>
<div id="why-bother" class="section level1">
<h1><span class="header-section-number">2</span> Why bother?</h1>
<div id="why-do-we-need-all-this" class="section level2">
<h2><span class="header-section-number">2.1</span> Why do we need all this?</h2>
</div>
<div id="why-use-r-and-not-other-applications" class="section level2">
<h2><span class="header-section-number">2.2</span> Why use <code>R</code> and not other applications?</h2>
</div>
<div id="r-markdown-a-wonderful-life-in-plain-text" class="section level2">
<h2><span class="header-section-number">2.3</span> R Markdown: a wonderful life in plain text</h2>
</div>
<div id="regression-analysis-not-again" class="section level2">
<h2><span class="header-section-number">2.4</span> Regression analysis: not again!</h2>
<!--chapter:end:01-introduction.Rmd-->
</div>
</div>
<div id="basic-r-usage" class="section level1">
<h1><span class="header-section-number">3</span> Basic <code>R</code> Usage</h1>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(<span class="st">&quot;swirl&quot;</span>)
<span class="kw">library</span>(<span class="st">&quot;rio&quot;</span>)
<span class="kw">library</span>(<span class="st">&quot;ggplot2&quot;</span>)
<span class="kw">library</span>(<span class="st">&quot;dplyr&quot;</span>)</code></pre></div>
<p>The <code>R</code> programming language and software environment for statistical computing is an implementation of the proprietary <code>S</code> programming language by Ross Ithaka and Robert Gentleman in 1992. It quickly gained in popularity (see, e.g, this Nature article from 2014 <a href="http://www.nature.com/news/programming-tools-adventures-with-r-1.16609">Programming tools: Adventures with R</a>) and now has more than <strong>official</strong> 10,000 user contributed packages (see as well the blog piece <a href="https://www.r-bloggers.com/on-the-growth-of-cran-packages/">On the growth of CRAN packages</a>).</p>
<div id="for-absolute-beginners" class="section level2">
<h2><span class="header-section-number">3.1</span> For absolute beginners</h2>
<p>At the moment there are <em>many</em> tutorials, blogs, youtube clips, and background materials about using <code>R</code> on the internet. I therefore do not intend to write a complete handbook, but focus instead on what I need for my courses. Moreover, I do not intend to teach the very basic stuff. There are very good online (and offline) tutorials out there. The RStudio <a href="https://www.rstudio.com/online-learning/#R" class="uri">https://www.rstudio.com/online-learning/#R</a>] gives a good overview of all the options.</p>
<p>One tutorial I particularly enjoyed is the quick and free code school tutorial from O’Reilly (to be found here: <a href="http://tryr.codeschool.com/" class="uri">http://tryr.codeschool.com/</a>. Another option would be to take the introduction course from DataCamp <a href="https://www.datacamp.com/courses/free-introduction-to-r" class="uri">https://www.datacamp.com/courses/free-introduction-to-r</a>. Note that although both tutorials are free, subsequent tutorials are not. But for our purpose we only need the free introductions.</p>
<p>For slightly more extensive material, there is a very good tutorial package out there called Swirl (see as well the website: <a href="http://swirlstats.com/students.html" class="uri">http://swirlstats.com/students.html</a>). I very much recommend using this package for absolute beginners. The way to do this is rather simple. First install the package by typing:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">install.packages</span>(<span class="st">&quot;swirl&quot;</span>)</code></pre></div>
<p>then start Swirl by first loading the package:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(<span class="st">&quot;swirl&quot;</span>)</code></pre></div>
<p>And then call the function by typing:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">swirl</span>()</code></pre></div>
<p>In the first menu choose <code>R Programming</code>. Now, there are 15 lessons. I find the first four the most useful (Basic Building Block, Workspace and Files, Sequences of Numbers, Vectors), but others are very useful as well to go through. The command <code>main()</code> by the way brings you always back to the main menu, and do not go for the credits on coursera (that is now a paid online course).</p>
</div>
<div id="how-to-use-it" class="section level2">
<h2><span class="header-section-number">3.2</span> How to use it</h2>
<p><code>R</code> is truly a programming language in the sense that there is no graphical user interface (GUI) involved. You need to type your own commands. And for beginners this sort of sucks. It seems slower, you have no idea which command to type in, and you frequently make many mistakes. However, when you start to use it more, the speed of getting things done goes up (sometimes exponentially), you have a better grasp on the basic commands, and the number of mistakes go down. And perhaps you even reach that wonderful sensation: you feel in control of things.</p>
<p>In contrast with programs such as <code>Excel</code> or <code>SPSS</code>, there are two big differences: (<em>i</em>) you use scripts and (<em>ii</em>) you make frequently use of packages which are essentially written by other <code>R</code> users.</p>
<div id="subsec:scripts" class="section level3">
<h3><span class="header-section-number">3.2.1</span> Scripts</h3>
<p>The use of scripts or program files is somewhat alien to most. Although programs such as <code>Stata</code> also makes use of scripts in the form of so-called <code>do</code> files. You start a new script by clicking on File &gt; New Script (<code>R</code> editor) or File &gt; New File &gt; New Script (<code>RStudio</code>). You now have a new <em>empty</em> file (which you have to save from time to time). If you fill in this file with commands, you are actually programming. The <strong>huge</strong> benefit of this procedure is that you record what you have done and that you can easily change something without <strong>retyping</strong> the whole thing over again.</p>
<p>As an example, assume that somebody gives you a dataset with 2 variables and ask you to analyse this dataset. With <code>SPSS</code> you read this dataset in and then click on various butttons so you get some output. Now, assume further that this person actually has forgotten a variable (this happens more often than you think) and gives you a new dataset with 3 variables. Then you have to do all the clicking again (and hopefully you remembered on which buttons you actually clicked).</p>
<p>When you have a script file you only have to change the code in 1 or 2 places and run it all again. No sweat! So, writing up all the commmands and saving it for later, might cost you some time in the <strong>beginning</strong>, but there are <strong>huge</strong> time savers later on! To run a script you simply need to press the button Edit &gt; Run all (<code>R</code> editor) or Code &gt; Run Region &gt; Run All (<code>RStudio</code>). Nobody does that however, because there are numerous Keyboard Shortcuts (I advise you to learn them, because they make you considerably faster. Actually, most Keyboard Shortcuts work in a wide variety of editors–even in <code>Word</code>.)</p>
</div>
<div id="help" class="section level3">
<h3><span class="header-section-number">3.2.2</span> Help!</h3>
<p>Sometimes you have found a command you would think you could use, but you do not know how, then you need to use the <code>help()</code> command, where the thing you want help on should go between parentheses. A shortcut for this would be to use the <code>?</code> operator in front of the command. For instance, you know that the command <code>sqrt</code> could be useful to find square roots, but how? Then type:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">help</span>(sqrt)
?sqrt</code></pre></div>
<p>And the appropiate documentation will pop up. Not that the documentation will make sense immediately, but a very efficient way to understand what is going on is to look for the examples at the bottom of the documentation and copy and play with them. In fact, you can immediately run an example by using the <code>example</code> command, as follows</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">example</span>(sqrt)</code></pre></div>
</div>
<div id="subsec:packages" class="section level3">
<h3><span class="header-section-number">3.2.3</span> Packages</h3>
<p><code>R</code> (as many other software programs/languages nowadays) depends heavily on packages written by other parties, usually users of <code>R</code>. There are now many packages out there. You can find the ‘official’ ones on <a href="https://cran.r-project.org/web/packages/available_packages_by_name.html">the CRAN website</a>, but there are many more. Packages have to be installed (both <code>R</code> editor and <code>RStudio</code> have a separate package manager) and afterwards loaded. Say, for instance we want to use the awesome <code>ggplot2</code> package (a package to make plots look nice, actually to make more elaborate plots but anyway), then to install and load the package we give the commands:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">install.packages</span>(<span class="st">&quot;ggplot2&quot;</span>)
<span class="kw">library</span>(<span class="st">&quot;ggplot2&quot;</span>)</code></pre></div>
<p>Now, we can use the commands from this package as if they were built-in.</p>
<p>Gradually, we come across some useful packages. Those we will use in a chapter will always be listed at the start of the chapter.</p>
</div>
<div id="using-comments" class="section level3">
<h3><span class="header-section-number">3.2.4</span> Using comments</h3>
<p>A final word in this section about the use of comments. <strong>Do it!</strong>. Really, it will make your future life much easier if you have documented what you have done. You can insert comments by using the <code>#</code> operator (everything after the hashtag is a comment), so, e.g.,</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="dv">2</span><span class="op">+</span><span class="dv">2</span> <span class="co"># always wanted to know about the outcome, but were afraid to ask</span></code></pre></div>
</div>
</div>
<div id="reading-and-writing-data" class="section level2">
<h2><span class="header-section-number">3.3</span> Reading and writing data</h2>
<p>To properly do statistics one needs data (duh!). Luckily, there are numerous ways to get data in <code>R</code>.</p>
<p>When you just have a <code>csv</code> text file (comma separated file), it is easy, you just type:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">df &lt;-<span class="st"> </span><span class="kw">read.csv</span>(<span class="dt">file=</span><span class="st">&quot;my_data.csv&quot;</span>, <span class="dt">header =</span> <span class="ot">TRUE</span>)</code></pre></div>
<p>and you read in the <code>data.csv</code> in a data frame variable called <code>df</code>. Note that the original header variables are preserved. If you would like to store your data you can do the reverse, namely:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">write.csv</span>(df, <span class="dt">file =</span> <span class="st">&quot;my_data.csv&quot;</span>)</code></pre></div>
<p>Now sometimes you do not have nicely formatted <code>.csv</code> or <code>.txt</code>files, but nasty <code>.dta</code> files from Stata or <code>.xlsx</code> files from <code>Excel</code>. Here the package Rio comes very handed, being the swiss-army knife of data converters in <code>R</code>. Assume you have the <code>mtcars</code> dataset in various formats, then you can do</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(<span class="st">&quot;rio&quot;</span>)

x &lt;-<span class="st"> </span><span class="kw">import</span>(<span class="st">&quot;mtcars.sav&quot;</span>)  <span class="co"># SPSS data file</span>
y &lt;-<span class="st"> </span><span class="kw">import</span>(<span class="st">&quot;mtcars.xlsx&quot;</span>) <span class="co"># Excel data file</span>
z &lt;-<span class="st"> </span><span class="kw">import</span>(<span class="st">&quot;mtcars.dta&quot;</span>)  <span class="co"># Stata data file</span></code></pre></div>
<p>and all dataframes <code>x</code>, <code>y</code> <code>z</code> should be identical.</p>
</div>
<div id="ehmmm-dataframes" class="section level2">
<h2><span class="header-section-number">3.4</span> Ehmmm, dataframes</h2>
<p>I already mentioned dataframes above, but have not yet explained what they are. Simply, it is your data. Lets construct a simple dataframe:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">Names  &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;Thomas&quot;</span>, <span class="st">&quot;Erik&quot;</span>, <span class="st">&quot;Mark&quot;</span>, <span class="st">&quot;Eveline&quot;</span>)
Grades &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">5</span>, <span class="dv">8</span>, <span class="fl">6.5</span>, <span class="dv">7</span>)
Female &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="ot">FALSE</span>,<span class="ot">FALSE</span>,<span class="ot">FALSE</span>,<span class="ot">TRUE</span>)

df_grades &lt;-<span class="st"> </span><span class="kw">data.frame</span>(Names, Grades, Female) </code></pre></div>
<p>First,note a couple of things. A dataframe can consists of various data_types, in this case strings (the names)—so variable names are always in strings—, numbers (the grades) and so-called Booleans (someone is female or not). Secondly, we have named the variables. So, we now have a dataframe called df_grades. Great, now what? Well, we can do a couple of things. By using the command <code>head()</code> we can show the first 6 rows of this dataframe.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">head</span>(df_grades)</code></pre></div>
<pre><code>##     Names Grades Female
## 1  Thomas    5.0  FALSE
## 2    Erik    8.0  FALSE
## 3    Mark    6.5  FALSE
## 4 Eveline    7.0   TRUE</code></pre>
<p>Because we only have four observations this actually gives our whole dataframe (you can also just type <code>df_grades</code> to get this). Using square brackets <code>[]</code> allows you get specific information from this dataset, where the first index denotes the row and the second index denotes the column. Look at the following examples:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">df_grades[<span class="dv">1</span>,<span class="dv">2</span>]</code></pre></div>
<pre><code>## [1] 5</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">df_grades[<span class="dv">1</span>,]</code></pre></div>
<pre><code>##    Names Grades Female
## 1 Thomas      5  FALSE</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">df_grades[<span class="dv">3</span>]</code></pre></div>
<pre><code>##   Female
## 1  FALSE
## 2  FALSE
## 3  FALSE
## 4   TRUE</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">df_grades[<span class="st">&quot;Names&quot;</span>]</code></pre></div>
<pre><code>##     Names
## 1  Thomas
## 2    Erik
## 3    Mark
## 4 Eveline</code></pre>
<p>Most of the statistical stuff we will do invokes the use of dataframe and specific variables from that dataframe.</p>
<p>How to change variables or generate new variables in such a dataframe. Well, note that you can always access elements from an object by the <code>$</code>-sign. So, let’s suppose we want to add a new variable to our dataframe where we add a whole point to the <code>Grades</code> variable. We can do this as follows:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">df_grades<span class="op">$</span>Grades_revised &lt;-<span class="st"> </span>df_grades<span class="op">$</span>Grades <span class="op">+</span><span class="st"> </span><span class="dv">1</span></code></pre></div>
<p>Now, the grades dataframe looks like:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">head</span>(df_grades)</code></pre></div>
<pre><code>##     Names Grades Female Grades_revised
## 1  Thomas    5.0  FALSE            6.0
## 2    Erik    8.0  FALSE            9.0
## 3    Mark    6.5  FALSE            7.5
## 4 Eveline    7.0   TRUE            8.0</code></pre>
<p>We can even do this in a more simple way, by invoking the most brilliant <code>dplyr</code> package. Say, we want to create a log variable of the “Grades” variable and then a new variable where we add +1. No idea why, but we want it. Then</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">df_grades &lt;-<span class="st"> </span><span class="kw">mutate</span>(df_grades, 
               <span class="dt">log_grades =</span> <span class="kw">log</span>(Grades),
               <span class="dt">log_grades_revised =</span> log_grades <span class="op">+</span><span class="st"> </span><span class="dv">1</span>)</code></pre></div>
<p>This does oes the trick. Note that I only have to invoke <code>mutate</code> once. <code>dplyr</code> can be used for filtering, selecting, reshaping, sorting and a whole lot of other stuff. A very handy cheatsheet can be found <a href="https://www.rstudio.com/wp-content/uploads/2015/02/data-wrangling-cheatsheet.pdf">here</a>.</p>
<p>Now, the grades dataframe looks like:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">head</span>(df_grades)</code></pre></div>
<pre><code>##     Names Grades Female Grades_revised log_grades log_grades_revised
## 1  Thomas    5.0  FALSE            6.0   1.609438           2.609438
## 2    Erik    8.0  FALSE            9.0   2.079442           3.079442
## 3    Mark    6.5  FALSE            7.5   1.871802           2.871802
## 4 Eveline    7.0   TRUE            8.0   1.945910           2.945910</code></pre>
</div>
<div id="functions" class="section level2">
<h2><span class="header-section-number">3.5</span> Functions</h2>
<p>I already referred to the concepts of functions above. Everything in <code>R</code> that has the symbols <code>()</code> just behind a word denotes a function. And most things in <code>R</code> are really a function. Examples you have already seen above are <code>sqrt()</code>, <code>head()</code>, and <code>read.csv()</code>. As a user, you can define your own functions. (But always do this before you ‘call’ this function.) Suppose, we want to create a function that calculates the function <span class="math inline">\(z = x^2 + y^2 + 10*x + 12* y - 10\)</span> for every <span class="math inline">\(x\)</span> and <span class="math inline">\(y\)</span> we would like to use. For instance, we can first define the function (let’s call the function ‘zvalue’):</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">zvalue &lt;-<span class="st"> </span><span class="cf">function</span>(x,y){
  <span class="kw">return</span>(x<span class="op">^</span><span class="dv">2</span> <span class="op">+</span><span class="st"> </span>y<span class="op">^</span><span class="dv">2</span> <span class="op">+</span><span class="st"> </span><span class="dv">10</span><span class="op">*</span>x <span class="op">+</span><span class="st"> </span><span class="dv">12</span><span class="op">*</span><span class="st"> </span>y <span class="op">-</span><span class="st"> </span><span class="dv">10</span>)
}</code></pre></div>
<p>Note that the <code>return()</code> is not necessary, as long as it is the last statement that you make.</p>
<p>And we invoke the function for <span class="math inline">\(x=2\)</span> and <span class="math inline">\(y=2\)</span>, or for <span class="math inline">\(x=2\)</span> and <span class="math inline">\(y=3\)</span>, or even for <span class="math inline">\(x=42\)</span> and <span class="math inline">\(y=42\)</span>,as follows:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">zvalue</span>(<span class="dv">2</span>,<span class="dv">2</span>)</code></pre></div>
<pre><code>## [1] 42</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">zvalue</span>(<span class="dv">2</span>,<span class="dv">3</span>) <span class="co"># Why not, why not</span></code></pre></div>
<pre><code>## [1] 59</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">zvalue</span>(<span class="dv">42</span>,<span class="dv">42</span>) <span class="co"># The answer to everying squared!</span></code></pre></div>
<pre><code>## [1] 4442</code></pre>
<p>In fact, we now see as well why functions are so useful. We can invoke them multiple times with different parameters.</p>
</div>
<div id="regression-modeling" class="section level2">
<h2><span class="header-section-number">3.6</span> Regression modeling</h2>
<p>Before we start laying-out how to do regression modeling in <code>R</code>, we first need data. And for this purpose we will simulate our data by the following commands:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">x &lt;-<span class="st"> </span><span class="kw">runif</span>(<span class="dv">100</span>, <span class="dt">min =</span> <span class="dv">0</span>, <span class="dt">max =</span> <span class="dv">1</span>) <span class="co"># create 100 uniformly distributed numbers in interval (0,1)</span>
y &lt;-<span class="st"> </span><span class="dv">2</span> <span class="op">+</span><span class="st"> </span><span class="dv">6</span><span class="op">*</span>x <span class="op">+</span><span class="st"> </span><span class="kw">rnorm</span>(<span class="dv">100</span>, <span class="dt">mean =</span> <span class="dv">0</span>, <span class="dt">sd =</span> <span class="dv">1</span>) <span class="co"># rnorm stands for the normal distribution</span>
df &lt;-<span class="st"> </span><span class="kw">data.frame</span>(y,x) <span class="co"># Strictly not necessary but for the sake of the exposition</span></code></pre></div>
<p>So in fact we have now created the following model:</p>
<p><span class="math display">\[
y_i = 2 + 6 x_i + \epsilon_i,
\]</span> where <span class="math inline">\(\epsilon_i\)</span> is standard normally distributed (as I will explain later in Section @ref(sec:theory) this is for convenience but <strong>not</strong> absolutely needed to do linear regression).</p>
<p>checking this with</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">head</span>(df)</code></pre></div>
<pre><code>##          y         x
## 1 6.251614 0.6115453
## 2 6.509932 0.6859911
## 3 4.379176 0.1807464
## 4 6.820529 0.7738282
## 5 6.381115 0.8108168
## 6 3.600415 0.2960357</code></pre>
<p>indeed shows the first 6 combination of <span class="math inline">\(x\)</span> and <span class="math inline">\(y\)</span>. If we now perform a linear regression, then we expect that the estimated intercept should be very close to 2 and the estimated slope parameter should be very close to 6. In <code>R</code> we have the command <code>lm()</code> (from linear model) to do this as follows:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">linear_model &lt;-<span class="st"> </span><span class="kw">lm</span>(y<span class="op">~</span>x, <span class="dt">data =</span> df)</code></pre></div>
<p>We now have performed a regression of <span class="math inline">\(y\)</span> onto <span class="math inline">\(x\)</span>, using the data <code>df</code> and save the result in a variable called linear_model. First look at the first part of the <code>lm(,)</code> expression. <code>y~x</code> means that <code>y</code> is the left-hand side variable and <code>x</code> the righ-hand side variable (if we have more variables, the formula becomes something as<code>y~x+u+v+w+z</code>). The second part of the <code>lm(,)</code> expression denotes the specific dataframe to be used. Namely, in <code>R</code> you can have multiple dataframes so you have to specify which one is to be used.</p>
<p>Right, but now what? Well, we have now a variable called linear_model, just typing in <code>linear_model</code> only gets you the real basic results:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">linear_model</code></pre></div>
<pre><code>## 
## Call:
## lm(formula = y ~ x, data = df)
## 
## Coefficients:
## (Intercept)            x  
##       1.798        6.403</code></pre>
<p>But, you want more, right? Standard errors, t-statistics, R-squares, the whole lot. For this, you need the <code>summary()</code> command, which gives you the following outcome</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">summary</span>(linear_model)</code></pre></div>
<pre><code>## 
## Call:
## lm(formula = y ~ x, data = df)
## 
## Residuals:
##     Min      1Q  Median      3Q     Max 
## -2.3668 -0.7524  0.0943  0.6321  3.6974 
## 
## Coefficients:
##             Estimate Std. Error t value Pr(&gt;|t|)    
## (Intercept)   1.7977     0.2119   8.483 2.34e-13 ***
## x             6.4032     0.3552  18.028  &lt; 2e-16 ***
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1
## 
## Residual standard error: 1.062 on 98 degrees of freedom
## Multiple R-squared:  0.7683, Adjusted R-squared:  0.766 
## F-statistic:   325 on 1 and 98 DF,  p-value: &lt; 2.2e-16</code></pre>
<p>Interestingly, our parameters are close to 2 and 6, but not that close (which happens with a limited amount of observations, notice as well the relatively large standard errors). So, the command <code>summary()</code> gives all the needed statistical output, but what about regression diagnostics. For this you can ask for a plot of the variable linear_model</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">plot</span>(linear_model)</code></pre></div>
<p><img src="unnamed-chunk-26-1.png" width="672" /><img src="unnamed-chunk-26-2.png" width="672" /><img src="unnamed-chunk-26-3.png" width="672" /><img src="unnamed-chunk-26-4.png" width="672" /></p>
<p>And that is basically it, at least for the basics. There is much more to say about the <code>lm()</code> command, but that is for later.</p>
</div>
<div id="making-plots" class="section level2">
<h2><span class="header-section-number">3.7</span> Making plots</h2>
<p>Where <code>R</code> truly shines is in making plots, diagrams, histograms, etcetera. The first thing with data you want to do is to make a scatterplot. With our previously defined <span class="math inline">\(x\)</span> and <span class="math inline">\(y\)</span> data this can be easily done by:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">plot</span>(x,y)</code></pre></div>
<p><img src="unnamed-chunk-27-1.png" width="672" /></p>
<p>If you would like to create a histogram, just use <code>hist()</code> as</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">hist</span>(y)</code></pre></div>
<p><img src="unnamed-chunk-28-1.png" width="672" /></p>
<p>However, to go one step further you also make a plot of a dataframe. for our df dataframe this is not very insightful, but let’s add another variable <span class="math inline">\(z\)</span> uncorrelated with <span class="math inline">\(x\)</span> and <span class="math inline">\(y\)</span> and then plot the dataframe (the <code>$</code> indicate that <code>z</code> is a variable in dataframe <code>df</code>).</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">df<span class="op">$</span>z &lt;-<span class="st"> </span><span class="kw">runif</span>(<span class="dv">100</span>, <span class="dv">0</span>,<span class="dv">1</span>)
<span class="kw">plot</span>(df)</code></pre></div>
<p><img src="unnamed-chunk-29-1.png" width="672" /></p>
<p>And luckily, this plot confirms what we expect. <span class="math inline">\(x\)</span> are correlated <span class="math inline">\(y\)</span> by construction and <span class="math inline">\(z\)</span> is not correlated with either <span class="math inline">\(x\)</span> and <span class="math inline">\(y\)</span>. These are all the so-called baseline plots. They are great (and already highly customizable), but lately there has been a new kid on the block called ggplot2. It goes to far to explain the details of ggplot2 (gg here stands for the grammar of graphics), but suffice to say that ggplot2 works with building blocks, so that every piece of the figure that you want (or can think of) can be constructed. Just as an example, let’s redo our scatterplot but now using ggplot2 and say we want to add some density lines from our observations (just because we can). This can be done in the following way</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">ggplot</span>(df, <span class="kw">aes</span>(x,y))<span class="op">+</span><span class="kw">geom_point</span>() <span class="op">+</span><span class="st"> </span><span class="kw">geom_density2d</span>()</code></pre></div>
<p><img src="unnamed-chunk-30-1.png" width="672" /></p>
</div>
<div id="recap" class="section level2">
<h2><span class="header-section-number">3.8</span> Recap</h2>
<p>For the absolute beginner <code>R</code> is huge and daunting. You need to learn by taking small steps and by practicing (a lot). Do not aim immediately at big and complex projects but start small and at the basics. You will then learn that you quickly make progress and at a certain time even become efficienter than when using mouse driven tools (clicking) as <code>Excel</code> or <code>SPSS</code>. In later chapters I dive in to some more detailed topics, and hopefully the material provides you with a background solid enough to understand and work with those topics using <code>R</code>.</p>
<!--chapter:end:02-usingr.Rmd-->
</div>
</div>
<div id="digression-linear-regression-and-how-to-apply-it" class="section level1">
<h1><span class="header-section-number">4</span> Digression: Linear Regression and how to apply it</h1>
<div id="sec:theory" class="section level2">
<h2><span class="header-section-number">4.1</span> Theoretical background</h2>
<div id="the-model" class="section level3">
<h3><span class="header-section-number">4.1.1</span> The model</h3>
</div>
<div id="the-least-squares-assumptions" class="section level3">
<h3><span class="header-section-number">4.1.2</span> The least squares assumptions</h3>
</div>
<div id="possible-violations-and-how-to-spot-them" class="section level3">
<h3><span class="header-section-number">4.1.3</span> Possible violations and how to spot them</h3>
</div>
<div id="normality-heteroskedasticity-and-multicollinearity" class="section level3">
<h3><span class="header-section-number">4.1.4</span> Normality, heteroskedasticity and multicollinearity</h3>
</div>
</div>
<div id="sec:applications" class="section level2">
<h2><span class="header-section-number">4.2</span> Applications of linear regression</h2>
<div id="descriptives" class="section level3">
<h3><span class="header-section-number">4.2.1</span> Descriptives</h3>
</div>
<div id="baseline-model" class="section level3">
<h3><span class="header-section-number">4.2.2</span> Baseline model</h3>
</div>
<div id="specificion-issues" class="section level3">
<h3><span class="header-section-number">4.2.3</span> Specificion issues</h3>
</div>
<div id="reporting" class="section level3">
<h3><span class="header-section-number">4.2.4</span> Reporting</h3>
</div>
<div id="internal-validation" class="section level3">
<h3><span class="header-section-number">4.2.5</span> Internal validation</h3>
<!--chapter:end:03-linearregression.Rmd-->
</div>
</div>
</div>
<div id="network-analysis-with-r" class="section level1">
<h1><span class="header-section-number">5</span> Network analysis with <code>R</code></h1>
<div id="introduction-1" class="section level2">
<h2><span class="header-section-number">5.1</span> Introduction</h2>
</div>
<div id="creating-networks" class="section level2">
<h2><span class="header-section-number">5.2</span> Creating networks</h2>
<div id="creating-network-yourself" class="section level3">
<h3><span class="header-section-number">5.2.1</span> Creating network yourself</h3>
</div>
<div id="structured-networks" class="section level3">
<h3><span class="header-section-number">5.2.2</span> Structured networks</h3>
</div>
<div id="reading-in-networks" class="section level3">
<h3><span class="header-section-number">5.2.3</span> Reading in networks</h3>
</div>
<div id="sankey-networks" class="section level3">
<h3><span class="header-section-number">5.2.4</span> Sankey networks</h3>
</div>
</div>
<div id="network-characteristics" class="section level2">
<h2><span class="header-section-number">5.3</span> Network characteristics</h2>
<!--chapter:end:04-networkanalysis.Rmd-->
</div>
</div>
<div id="in-conclusion" class="section level1">
<h1><span class="header-section-number">6</span> In conclusion</h1>
<!--chapter:end:05-conclusion.Rmd-->
</div>
<!--bookdown:body:end-->
            </section>

          </div>
        </div>
      </div>
<!--bookdown:link_prev-->
<!--bookdown:link_next-->
    </div>
  </div>
<!--bookdown:config-->

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://cdn.bootcss.com/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:" && /^https?:/.test(script.src))
      script.src  = script.src.replace(/^https?:/, '');
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
